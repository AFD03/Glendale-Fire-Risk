================================================================================
                    GLENDALE FIRE RISK - GIS WORKFLOW
================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                           STEP 1: DATA ACQUISITION                          │
└─────────────────────────────────────────────────────────────────────────────┘

    ✓ Glendale Boundary      → data_raw/Glendale_boundary.shp
    ✓ Building Footprints    → data_processed/LA_buildings_glendale.gpkg
    □ DEM (10m)              → data_raw/dem/*.tif          [DOWNLOAD REQUIRED]
    □ Vegetation/Fuel        → data_raw/vegetation/*.shp   [OPTIONAL]
    □ Fire Hazard Zones      → data_raw/fhsz/*.shp         [OPTIONAL]

    Alternative for Testing:
    🔧 python generate_sample_dem.py  → Creates synthetic DEM

┌─────────────────────────────────────────────────────────────────────────────┐
│                  STEP 2: CLIP & REPROJECT (clip_and_reproject.py)          │
└─────────────────────────────────────────────────────────────────────────────┘

    Input:                          Process:                  Output:
    ─────────────────               ─────────────────         ─────────────────
    Raw vector data      ──►        • Clip to boundary       data_processed/
    (buildings, etc.)               • Reproject to           geojson/
                                     EPSG:2229                 └─ *.geojson
    
    Raw raster data      ──►        • Clip to boundary       data_processed/
    (DEM)                           • Reproject to            raster/
                                     EPSG:2229                 └─ dem_clipped.tif

┌─────────────────────────────────────────────────────────────────────────────┐
│                  STEP 3: TERRAIN ANALYSIS (derive_terrain.py)               │
└─────────────────────────────────────────────────────────────────────────────┘

    Input:                          Process:                  Output:
    ─────────────────               ─────────────────         ─────────────────
    dem_clipped.tif      ──►        • Horn's Method          slope.tif
                                    • Sobel Filters           (0-90°)
                                    • Gradient Calc
                                                     ──►      aspect.tif
                                                              (0-360°, -1=flat)

┌─────────────────────────────────────────────────────────────────────────────┐
│               STEP 4: RISK CLASSIFICATION (build_risk_model.py)             │
└─────────────────────────────────────────────────────────────────────────────┘

    Input:              Reclassify:                Weight:        Combine:
    ─────────          ─────────────────           ──────         ────────
    slope.tif    ──►   0-5°   → 1 (Very Low)       × 0.45    ──┐
                       5-15°  → 2 (Low)                         │
                       15-25° → 3 (Moderate)                    │
                       25-35° → 4 (High)                        │
                       >35°   → 5 (Very High)                   │
                                                                 │
    aspect.tif   ──►   N (315-45°)  → 2 (Low)      × 0.25    ──┤  Weighted
                       E (45-135°)  → 3 (Moderate)             ├─► Overlay
                       S (135-225°) → 5 (Very High)            │     │
                       W (225-315°) → 4 (High)                 │     │
                                                                 │     │
    vegetation   ──►   Default → 3 (Moderate)      × 0.30    ──┘     │
    (optional)         [or actual fuel data]                          │
                                                                       │
                                                                       ▼
                                                            fire_risk.tif
                                                            (1-5 scale)

┌─────────────────────────────────────────────────────────────────────────────┐
│                          FINAL OUTPUT & NEXT STEPS                          │
└─────────────────────────────────────────────────────────────────────────────┘

    Risk Layers Generated:
    ━━━━━━━━━━━━━━━━━━━━━
    ✓ slope_risk.tif          (1-5 classification)
    ✓ aspect_risk.tif         (1-5 classification)
    ✓ vegetation_risk.tif     (1-5 classification)
    ✓ fire_risk.tif           (Final weighted risk map) ★

    Risk Scale:
    ───────────
    1 = Very Low  ░░
    2 = Low       ▒▒
    3 = Moderate  ▓▓
    4 = High      ██
    5 = Very High ██  ⚠️

    Next Steps:
    ───────────
    1. Open QGIS project: qgis_project/glendale_fire_risk.qgz
    2. Load risk layers and apply styling
    3. Intersect with building footprints for building-level risk
    4. Export styled layers for Dash web application
    5. Compare with CalFire FHSZ zones for validation

┌─────────────────────────────────────────────────────────────────────────────┐
│                           AUTOMATION & UTILITIES                            │
└─────────────────────────────────────────────────────────────────────────────┘

    Master Workflow:
    ────────────────
    🚀 python run_workflow.py    → Runs all steps automatically

    Testing:
    ────────
    ✓ python test_scripts.py     → Validates script syntax
    ✓ python generate_sample_dem.py → Creates test data

    Help:
    ─────
    📖 scripts/README.md          → Comprehensive documentation
    📋 scripts/data_download_notes.md → Data acquisition guide
    🚀 QUICKSTART.md              → Quick start guide
    📊 GIS_PROCESSING.md          → Technical overview

================================================================================
                              READY FOR PRODUCTION
================================================================================
